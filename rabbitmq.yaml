- name: cofigure the rabbitmq server
  become: yes
  hosts:
  tasks:
  - name: copy the rabbitmq repo
    ansible.builtin.copy:
     src: rabbitmq.repo
     dest: /etc/yum.repos.d/rabbitmq.repo

  - name: install rabbitmq
    ansible.builtin.dnf:
     name: rabbitmq-server
     state: present

  - name: enable and start rebbitmq
    ansible.builtin.service:
     name: rebbitmq
     state: started
     enabled: yes
     
  - name: add user and password
    community.rabbitmq.rabbitmq_user:
     user: roboshop
     password: roboshop123
     vhost: /
     configure_priv: .*
     read_priv: .*
     write_priv: .*
     state: present
